<h1 class="nav text-center text-white sticky-top p-2 bg-custom mt-0">User Details</h1>
<div class="container">
    <div class="text-right m-3">
        <button id="toggle-view" class="btn btn-primary">Card View</button>
    </div>
    
    <div id="table-view" style="display: block;">
        <table class="table table-striped">
            <thead>
            <tr>
                <th>Name</th>
                <th>Contact Option</th>
                <th>Contact Details</th>
                <th>Contribution</th>
                <th colspan="3"></th>
            </tr>
            </thead>
            <tbody>
            <% @user_details.each do |user_detail| %>
                <tr>
                    <td><%= user_detail.name %></td>
                    <td><%= user_detail.contacts %></td>
                    <td><%= user_detail.content %></td>
                    <td><%= user_detail.contribution %></td>
                </tr>
            <% end %>
            </tbody>
        </table>
    </div>
    
    <div id="card-view" style="display: none;">
        <div class="row">
            <% @user_details.each do |user_detail| %>
            <div class="col-md-3">
                <div class="card mb-4">
                    <h5 class="card-header"><%= user_detail.name %></h5>
                <div class="card-body">
                    <p class="card-text"><strong>Contact Option:</strong> <%= user_detail.contacts %></p>
                    <p class="card-text"><strong>Details:</strong> <%= user_detail.content %></p>
                </div>
                <div class="card-footer">
                    <p class="card-text"><strong>Contribution:</strong></p>
                    <hr>
                    <ul class="list-group">
                        <% if user_detail.contribution.is_a?(Array) %>
                            <% user_detail.contribution.each do |contribution| %>
                            <li class="list-group-item"><%= contribution %></li>
                            <% end %>
                        <% else %>
                            <li class="list-group-item"><%= user_detail.contribution %></li>
                        <% end %>
                    </ul>
                </div>
                </div>
            </div>
            <% end %>
        </div>
    </div>
    
    <br>
    
    <!-- <%= link_to 'New User Detail', new_user_detail_path, class: "btn btn-primary" %> -->
    
</div>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const toggleButton = document.getElementById("toggle-view");
        const tableView = document.getElementById("table-view");
        const cardView = document.getElementById("card-view");
    
        toggleButton.addEventListener("click", function() {
            if (tableView.style.display === "block") {
            tableView.style.display = "none";
            cardView.style.display = "block";
            toggleButton.textContent = "Table View";
            } else {
            tableView.style.display = "block";
            cardView.style.display = "none";
            toggleButton.textContent = "Card View";
            }
        });
    });
</script>